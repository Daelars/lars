---
// src/pages/index.astro
// Convert Astro.request.url to a URL object if it's not already one
const requestUrl = new URL(Astro.request.url);
const response = await fetch(`${requestUrl.origin}/api/files`);
const files = await response.json();
---

<html>
  <head>
    <title>Files List</title>
  </head>
  <body>
    <h1>Files</h1>
    <ul>
      {files.map((file) => <li>{file.name}</li>)}
    </ul>
  </body>
</html>
